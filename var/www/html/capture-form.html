 </form>

  <script>
    const form = document.getElementById('captureForm');
    const statusBox = document.getElementById('status');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const mode = form.mode.value;
      const endpoint =
        mode === 'test'
          ? 'http://localhost:5678/webhook-test/msg_v1'
          : 'https://2a2642ee6876.ngrok-free.app/webhook/msg_v1'; // update with live ngrok URL

      const formData = new FormData();
      formData.append('title', form.title.value);
      formData.append('first_name', form.firstName.value);
      formData.append('last_name', form.lastName.value);
      formData.append('contact_email', form.email.value);
      formData.append('profile_file', form.profileFile.files[0]);
      formData.append('brief_file', form.briefFile.files[0]);

      try {
        const res = await fetch(endpoint, {
          method: 'POST',
          body: formData,
        });

        if (!res.ok) throw new Error(`Server responded ${res.status}`);
        const data = await res.json();

        statusBox.style.display = 'block';
        statusBox.className = 'success';
        statusBox.innerHTML = `‚úÖ Success!<br>üéâ Response: <pre>${JSON.stringify(data, null, 2)}</pre>`;
      } catch (err) {
        statusBox.style.display = 'block';
        statusBox.className = 'error';
        statusBox.innerHTML = `‚ùå Error: ${err.message}<br>‚ö†Ô∏è Please check console/network logs.`;
      }
    });
  </script>
</body>
</html>